<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>LIFF æ¸¬è©¦</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body style="font-family:sans-serif;padding:2em;line-height:1.5">
  <h2>ğŸ” LIFF æ¸¬è©¦é é¢</h2>
  <div id="result">æ­£åœ¨åˆå§‹åŒ– LIFF...</div>

  <script>
    const LIFF_ID = '2008049339-GDpDJd3j'; // â†æ›æˆä½ çš„ LIFF ID

    async function initLiff() {
      try {
        await liff.init({ liffId: LIFF_ID, withLoginOnExternalBrowser: true });

        if (!liff.isLoggedIn()) {
          document.getElementById('result').innerHTML = 'å°šæœªç™»å…¥ï¼Œæ­£åœ¨é‡æ–°å°å‘ç™»å…¥...';
          liff.login({ redirectUri: location.href.split('#')[0] });
          return;
        }

        const context = liff.getContext();
        document.getElementById('result').innerHTML = `
          âœ… æˆåŠŸåˆå§‹åŒ–<br>
          <b>userId:</b> ${context.userId || '<i>ç„¡æ³•å–å¾—</i>'}<br>
          <b>contextType:</b> ${context.type}
        `;
      } catch (err) {
        document.getElementById('result').innerHTML = `
          âŒ LIFF åˆå§‹åŒ–å¤±æ•—<br>
          <pre>${err.message || err}</pre>
        `;
        console.error(err);
      }
    }

    initLiff();
  </script>
</body>
</html>
